//  version 2021
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// schedules a event which starts 30 minutes BEFORE sunset:
//Switch Sunset_Event    {astro="planet=sun, type=set, property=end, offset=-30"}

rule "Daylight"                        
when
    Channel 'astro:sun:local:rise#event' triggered START

then    
    {
    Daylight.sendCommand(ON)
    Daylight_Date.sendCommand(new DateTimeType())
    
    Dark.sendCommand(OFF)
    Night.sendCommand(OFF)
    }
end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

rule "Dark"                        
when
    Channel 'astro:sun:local:set#event' triggered START 

then    
    {
    Dark.sendCommand(ON)
    Dark_Date.sendCommand(new DateTimeType())
    
    Daylight.sendCommand(OFF)
    }
end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

rule "Night"                        
when
    Time cron "0 30 22 ? * SUN,MON,TUE,WED,THU *" or                   // Time cron "0 0 22 30 * * ?"  
    Time cron "0 59 23 ? * FRI,SAT *"                                  // Time cron "0 0 23 30 * * ?"  
then    
    {
    Night.sendCommand(ON)
    Night_Date.sendCommand(new DateTimeType())
    }
end



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
